<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="ReactStudyNotesAll"><meta name="keywords" content="React"><meta name="author" content="𝓣𝓪𝓭𝓶"><meta name="copyright" content="𝓣𝓪𝓭𝓶"><title>ReactStudyNotesAll | 𝓣𝓪𝓭𝓶's Blog</title><link rel="shortcut icon" href="/my.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.0/css/all.min.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?837ab5c6a751430eeba265f36e622b79";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","UA-156561044-1","auto"),ga("send","pageview")</script><meta name="google-site-verification" content="4sNQ8r3e8C-DeXTBdbDP38MgpMP8Rw5pvHy2z4-z9ZY"><script>var GLOBAL_CONFIG={root:"/",copy:{success:"Copy successfully",error:"Copy error",noSupport:"The browser does not support"}}</script><meta name="generator" content="Hexo 4.2.1"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#React"><span class="toc-number">1.</span> <span class="toc-text">React</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Acquaint-React"><span class="toc-number">1.1.</span> <span class="toc-text">Acquaint React</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#官方定义"><span class="toc-number">1.1.1.</span> <span class="toc-text">官方定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#个人理解"><span class="toc-number">1.1.2.</span> <span class="toc-text">个人理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#摘抄"><span class="toc-number">1.1.3.</span> <span class="toc-text">摘抄</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Install"><span class="toc-number">2.</span> <span class="toc-text">Install</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Important-Knowledge"><span class="toc-number">3.</span> <span class="toc-text">Important Knowledge</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Virtual-DOM"><span class="toc-number">3.1.</span> <span class="toc-text">Virtual DOM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Diff"><span class="toc-number">3.2.</span> <span class="toc-text">Diff</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-amp-React-dom-amp-JSX"><span class="toc-number">3.3.</span> <span class="toc-text">React &amp; React-dom &amp; JSX</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CODE-Example"><span class="toc-number">3.4.</span> <span class="toc-text">CODE Example</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Assist-Tool"><span class="toc-number">3.5.</span> <span class="toc-text">Assist Tool</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Component"><span class="toc-number">4.</span> <span class="toc-text">Component</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Create-Two-ways"><span class="toc-number">4.1.</span> <span class="toc-text">Create(Two ways)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Function-方式"><span class="toc-number">4.1.1.</span> <span class="toc-text">Function 方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Class-方式"><span class="toc-number">4.1.2.</span> <span class="toc-text">Class 方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#适用性（摘抄）"><span class="toc-number">4.2.</span> <span class="toc-text">适用性（摘抄）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#State"><span class="toc-number">4.3.</span> <span class="toc-text">State</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Code-amp-Example"><span class="toc-number">4.4.</span> <span class="toc-text">Code &amp; Example</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Life"><span class="toc-number">5.</span> <span class="toc-text">Life</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Examplanation"><span class="toc-number">5.1.</span> <span class="toc-text">Examplanation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#defaultProps"><span class="toc-number">5.1.1.</span> <span class="toc-text">defaultProps</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CODE-amp-Example"><span class="toc-number">5.2.</span> <span class="toc-text">CODE &amp; Example</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#事件处理"><span class="toc-number">6.</span> <span class="toc-text">事件处理</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://i.loli.net/2019/11/24/Tj4hPoFKgXJE7xW.jpg"></div><div class="author-info__name text-center">𝓣𝓪𝓭𝓶</div><div class="author-info__description text-center"></div><div class="follow-button"><a href="https://liuhongwei3.github.io">Follow me ≧◇≦</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">31</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">35</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">11</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://liuhongwei3.github.io">𝓣𝓪𝓭𝓶</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image:url(https://i.loli.net/2020/02/28/2OPSFfaL73QIizV.jpg)"><div id="page-header"> <span class="pull-left"><a id="site-name" href="/">𝓣𝓪𝓭𝓶's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i> <span class="pull-right menus"><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/player">Player</a><a class="site-page" href="/about">About</a></span></div><div id="post-info"><div id="post-title">ReactStudyNotesAll</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-20</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/studyNotes/">studyNotes</a><div class="post-meta-wordcount"><span>Word count:</span> <span class="word-count">4.3k</span><span class="post-meta__separator">|</span><span>Reading time: 17 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><!DOCTYPE html><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><div id="aplayer"></div><script type="text/javascript" src="/js/aplayer.js"></script><div class="article-container" id="post-content"><div style="display:inline-flex"> <img alt="" src="https://img.shields.io/badge/Author-Tadm-pink.svg?style=flat-square"> <img alt="" src="https://img.shields.io/apm/l/vim-mode?style=flat-square"> <img alt="" src="https://img.shields.io/badge/Program-React-orange"></div><h1 id="React"><a href="#React" class="headerlink" title="React"></a>React</h1><blockquote><p>此文是个人学习 React 所整理的笔记,后续学习不断更新改进！</p></blockquote><h2 id="Acquaint-React"><a href="#Acquaint-React" class="headerlink" title="Acquaint React"></a>Acquaint React</h2><h3 id="官方定义"><a href="#官方定义" class="headerlink" title="官方定义"></a>官方定义</h3><p>React 是一个<strong>声明式，高效且灵活的用于构建用户界面</strong>的 <strong>JavaScript 库</strong>。使用 React 可以将一些简短、独立的代码片段组合成复杂的 UI 界面，这些代码片段被称作“组件”。</p><h3 id="个人理解"><a href="#个人理解" class="headerlink" title="个人理解"></a>个人理解</h3><p>相比 <strong>Vue</strong>，<strong>React *<em>是从 *</em>JS</strong> 角度来进行组件细分，即通过 JSX（Javascript+XML） 的形式来创建一个组件等等，反正就是 All in JS ~</p><p>他们之间更多的其他区别呢，将在后续整理完再继续总结。</p><h3 id="摘抄"><a href="#摘抄" class="headerlink" title="摘抄"></a>摘抄</h3><ul><li>React 起源于 Facebook 的内部项目，因为该公司对市场上所有 JavaScript MVC 框架，都不满意，就决定自己写一套，用来架设 Instagram（照片交友） 的网站。做出来以后，发现这套东西很好用，<strong>就在2013年5月开源了</strong>。</li><li>Angular1 2009 年 谷歌 MVC 不支持 组件化开发</li><li>由于 React 的<strong>设计思想极其独特</strong>，属于革命性创新，性能出众，代码逻辑却非常简单。所以，越来越多的人开始关注和使用，认为它可能是将来 Web 开发的主流工具。</li><li>清楚两个概念：<ul><li>library（库）：小而巧的库，只提供了特定的API；优点就是 船小好掉头，可以很方便的从一个库切换到另外的库；但是代码几乎不会改变；</li><li>Framework（框架）：大而全的是框架；框架提供了一整套的解决方案；所以，如果在项目中间，想切换到另外的框架，是比较困难的；</li></ul></li></ul><h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npx create-react-app my-app</span><br><span class="line"><span class="built_in">cd</span> my-app</span><br><span class="line">npm <span class="built_in">start</span></span><br></pre></td></tr></table></figure><blockquote><p>npx is correct~（npm 5.2+ 附带的 package 运行工具）</p></blockquote><p>访问：localhost:3000，这样一个简单的React程序就创建完成！</p><p>再继续编码之前我们先来看点关键知识：</p><h1 id="Important-Knowledge"><a href="#Important-Knowledge" class="headerlink" title="Important Knowledge"></a>Important Knowledge</h1><h2 id="Virtual-DOM"><a href="#Virtual-DOM" class="headerlink" title="Virtual DOM"></a>Virtual DOM</h2><ul><li><strong>DOM的本质</strong>：<ul><li>浏览器中的概念，用JS对象来表示 页面上的元素，并提供了操作 DOM 对象的API</li></ul></li><li><strong>React中的虚拟DOM</strong>：<ul><li>框架中的概念，是我们用JS对象来模拟页面上的 DOM 和 DOM嵌套</li></ul></li><li><strong>为什么要实现虚拟DOM（虚拟DOM的目的）：</strong><ul><li>为了实现页面中， DOM 元素的高效更新</li></ul></li></ul><h2 id="Diff"><a href="#Diff" class="headerlink" title="Diff"></a>Diff</h2><ul><li><p>*<em>Tree diff: *</em></p><ul><li>新旧两棵DOM树，逐层对比的过程；当整颗DOM逐层对比完毕，则所有需要被按需更新的元素，必然能够找到；</li></ul></li><li><p><strong>Component diff：</strong></p><ul><li><p>在进行Tree Diff的时候，每一层中，组件级别的对比，叫做 Component Diff；</p></li><li><p>如果对比前后，组件的类型<strong>相同</strong>，则<strong>暂时</strong>认为此组件<strong>不需要</strong>被更新；</p></li><li><p>如果对比前后，组件类型<strong>不同</strong>，则需要<strong>移除旧组件</strong>，<strong>创建新组件</strong>，并<strong>追加到页面</strong>上；</p></li></ul></li><li><p>*<em>Element diff: *</em></p><ul><li>在进行组件对比的时候，如果两个组件类型相同，则需要进行元素级别的对比，进一步寻找一同。</li></ul></li></ul><h2 id="React-amp-React-dom-amp-JSX"><a href="#React-amp-React-dom-amp-JSX" class="headerlink" title="React &amp; React-dom &amp; JSX"></a>React &amp; React-dom &amp; JSX</h2><p><strong>react</strong>： 专门用于创建组件和虚拟DOM的，同时组件的生命周期都在这个包中</p><p><strong>react-dom</strong>： 专门进行DOM操作的，最主要的应用场景，就是 <code>ReactDOM.render()</code></p><p><strong>JSX</strong>：官方文档非常详细：<a href="https://zh-hans.reactjs.org/docs/introducing-jsx.html" target="_blank" rel="noopener">https://zh-hans.reactjs.org/docs/introducing-jsx.html</a></p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatName</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> user.firstName + <span class="string">' '</span> + user.lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  firstName: <span class="string">'Harper'</span>,</span><br><span class="line">  lastName: <span class="string">'Perez'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//	官方建议将其内容放至括号内，当然只是建议</span></span><br><span class="line"><span class="keyword">const</span> element = (</span><br><span class="line">  &lt;h1&gt;</span><br><span class="line">    Hello, &#123;formatName(user)&#125;!</span><br><span class="line">  &lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDOM.render(</span></span><br><span class="line"><span class="regexp">  element,</span></span><br><span class="line"><span class="regexp">  document.getElementById('root')</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure><p><strong>jsx 语法的本质：</strong>不是直接把 jsx 渲染到页面上，而是内部将其先转换成 <strong>createElement</strong> 形式，再渲染</p><ul><li><p>在JSX创建DOM的时候，所有的节点，必须有唯一的根元素进行包裹，类似于vue -template需要一个div</p></li><li><p>在 jsx 语法中，标签必须 成对出现，如果是单标签，则必须自闭和！</p></li></ul><blockquote><p>当 编译引擎，在编译JSX代码的时候，如果遇到了<code>&lt;</code>那么就把它当作 HTML代码去编译，如果遇到了 <code>{}</code> 就把 花括号内部的代码当作 普通JS代码去编译；</p></blockquote><p><strong>元素渲染</strong>：<a href="https://zh-hans.reactjs.org/docs/rendering-elements.html" target="_blank" rel="noopener">https://zh-hans.reactjs.org/docs/rendering-elements.html</a></p><h2 id="CODE-Example"><a href="#CODE-Example" class="headerlink" title="CODE Example"></a>CODE Example</h2><blockquote><p>以下是基于 webpack 工作的项目，</p></blockquote><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br><span class="line">cnpm i react react-dom -S</span><br><span class="line">//	以及编译需要用到的 babel 插件</span><br><span class="line">cnpm i @babel/...(下面配置文件中的模块) -D</span><br><span class="line"></span><br><span class="line">//	配置.bablelrc</span><br><span class="line">&#123;</span><br><span class="line">  "presets": ["@babel/preset-env","@babel/preset-react"],</span><br><span class="line">  "plugins": ["@babel/transform-runtime","@babel/plugin-proposal-class-properties"]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//	webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebPackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> htmlPlugin = <span class="keyword">new</span> HtmlWebPackPlugin(&#123;</span><br><span class="line">	template: path.join(__dirname,<span class="string">'./src/index.html'</span>), <span class="comment">//源文件</span></span><br><span class="line">	filename: <span class="string">'index.html'</span> <span class="comment">//生成在内存中的名字</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	mode: <span class="string">'development'</span>,</span><br><span class="line">	entry: path.join(__dirname,<span class="string">'./src/main.js'</span>),	<span class="comment">// default:index.js(otherwise need to set entry)</span></span><br><span class="line">	plugins: [</span><br><span class="line">		htmlPlugin</span><br><span class="line">	],</span><br><span class="line">	<span class="built_in">module</span>: &#123; <span class="comment">//要打包的第三方模块</span></span><br><span class="line">		rules: [</span><br><span class="line">			&#123; </span><br><span class="line">				test: <span class="regexp">/\.js|jsx$/</span>, </span><br><span class="line">				use: <span class="string">'babel-loader'</span>, </span><br><span class="line">				exclude: <span class="regexp">/node_modules/</span> </span><br><span class="line">			&#125;,</span><br><span class="line">			&#123; </span><br><span class="line">				test: <span class="regexp">/\.css$/</span>, </span><br><span class="line">				use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>] </span><br><span class="line">			&#125;,</span><br><span class="line">			&#123; </span><br><span class="line">				test: <span class="regexp">/\.ttf|woff|woff2|eot|svg$/</span>, </span><br><span class="line">				use: [<span class="string">'url-loader'</span>] </span><br><span class="line">			&#125;,</span><br><span class="line">			&#123; </span><br><span class="line">				test: <span class="regexp">/\.scss$/</span>, </span><br><span class="line">				use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader?modules'</span>, <span class="string">'sass-loader'</span>] </span><br><span class="line">			&#125;,</span><br><span class="line">		]</span><br><span class="line">	&#125;,</span><br><span class="line">	resolve: &#123;</span><br><span class="line">		extensions: [<span class="string">'.js'</span>,<span class="string">'.jsx'</span>,<span class="string">'.css'</span>, <span class="string">'.scss'</span>],  <span class="comment">//  引入时则可省略后缀名</span></span><br><span class="line">		alias: &#123;</span><br><span class="line">			<span class="string">'@'</span>: path.join(__dirname,<span class="string">'./src'</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">//	package.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"webpacktest"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">    <span class="attr">"dev"</span>: <span class="string">"webpack-dev-server --open --port 8081 --hot"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"keywords"</span>: [],</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"@babel/core"</span>: <span class="string">"^7.8.4"</span>,</span><br><span class="line">    <span class="attr">"@babel/plugin-proposal-class-properties"</span>: <span class="string">"^7.8.3"</span>,</span><br><span class="line">    <span class="attr">"@babel/plugin-transform-runtime"</span>: <span class="string">"^7.8.3"</span>,</span><br><span class="line">    <span class="attr">"@babel/preset-env"</span>: <span class="string">"^7.8.4"</span>,</span><br><span class="line">    <span class="attr">"@babel/preset-react"</span>: <span class="string">"^7.8.3"</span>,</span><br><span class="line">    <span class="attr">"babel-core"</span>: <span class="string">"^6.26.3"</span>,</span><br><span class="line">    <span class="attr">"babel-loader"</span>: <span class="string">"^8.0.6"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-runtime"</span>: <span class="string">"^6.23.0"</span>,</span><br><span class="line">    <span class="attr">"css-loader"</span>: <span class="string">"^3.4.2"</span>,</span><br><span class="line">    <span class="attr">"file-loader"</span>: <span class="string">"^5.0.2"</span>,</span><br><span class="line">    <span class="attr">"node-sass"</span>: <span class="string">"^4.13.1"</span>,</span><br><span class="line">    <span class="attr">"sass-loader"</span>: <span class="string">"^8.0.2"</span>,</span><br><span class="line">    <span class="attr">"style-loader"</span>: <span class="string">"^1.1.3"</span>,</span><br><span class="line">    <span class="attr">"url-loader"</span>: <span class="string">"^3.0.0"</span>,</span><br><span class="line">    <span class="attr">"webpack"</span>: <span class="string">"^4.41.5"</span>,</span><br><span class="line">    <span class="attr">"webpack-cli"</span>: <span class="string">"^3.3.10"</span>,</span><br><span class="line">    <span class="attr">"webpack-dev-server"</span>: <span class="string">"^3.10.3"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"@babel/runtime"</span>: <span class="string">"^7.8.4"</span>,</span><br><span class="line">    <span class="attr">"bootstrap"</span>: <span class="string">"^4.4.1"</span>,</span><br><span class="line">    <span class="attr">"react"</span>: <span class="string">"^16.12.0"</span>,</span><br><span class="line">    <span class="attr">"react-dom"</span>: <span class="string">"^16.12.0"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// React &amp; ReactDom must set the name</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;      <span class="comment">// 创建组件、虚拟DOM，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">'react-dom'</span>    <span class="comment">//  将组件、虚拟DOM渲染至页面</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> bootcss <span class="keyword">from</span> <span class="string">'bootstrap/dist/css/bootstrap'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Hello <span class="keyword">from</span> <span class="string">'./components/Hello.jsx'</span></span><br><span class="line"><span class="keyword">import</span> Hellot <span class="keyword">from</span> <span class="string">'@/components/Hello.jsx'</span></span><br><span class="line"><span class="keyword">import</span> Helloignore <span class="keyword">from</span> <span class="string">'@/components/Hello'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cssStyle <span class="keyword">from</span> <span class="string">'@/css/main'</span></span><br><span class="line"><span class="comment">// 创建一个 H5 并渲染到 id 为 app 的容器中</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myH = React.createElement(<span class="string">'h5'</span>, <span class="literal">null</span>, <span class="string">'This is h5 tag~'</span>)</span><br><span class="line"><span class="keyword">const</span> myH = React.createElement(<span class="string">'h5'</span>, &#123;<span class="attr">id</span>: <span class="string">'myH'</span>&#125;, <span class="string">'This is h5 tag~'</span>)</span><br><span class="line"></span><br><span class="line">ReactDom.render(myH,<span class="built_in">document</span>.getElementById(<span class="string">'app'</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'hello tadm~'</span></span><br><span class="line"><span class="comment">//  通过 &#123;args&#125; 来调用定义的变量</span></span><br><span class="line"><span class="keyword">const</span> myDiv = <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>This is a div --- &#123;str&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">ReactDom.render(myDiv, <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> frames = [<span class="string">'Vue'</span>,<span class="string">'React'</span>,<span class="string">'Angular'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">//	创建一个简单的无状态(state)组件 首字母必须大写</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hello</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="comment">// return null</span></span><br><span class="line">	<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>This is Hello component<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//	传入参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hello</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">	props.name = <span class="string">'change'</span>  <span class="comment">//	props's value mustn't change(only read these values)</span></span><br><span class="line">	<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>This is Hello component --- &#123;props.id&#125; --- &#123;props.name&#125; --- &#123;props.age&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">	id: <span class="number">0</span>,</span><br><span class="line">	name: <span class="string">'Tadm'</span>,</span><br><span class="line">	age: <span class="number">19</span>,</span><br><span class="line">	code: <span class="string">'react'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> newObj = &#123;</span><br><span class="line">	id: <span class="number">1</span>,</span><br><span class="line">	...obj,</span><br><span class="line">	id: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以后可以单独抽取出为一个样式 JS 文件，使用时按需导入</span></span><br><span class="line"><span class="keyword">const</span> styles = &#123;</span><br><span class="line">    hStyle: &#123;</span><br><span class="line">        color: <span class="string">'orange'</span>, <span class="attr">fontWeight</span>: <span class="number">500</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//	有状态(state)组件</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mycomponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>() &#123;</span><br><span class="line">		<span class="keyword">super</span>()</span><br><span class="line">		<span class="comment">// before use this must use super()</span></span><br><span class="line">		<span class="keyword">this</span>.state = &#123;</span><br><span class="line">			msg: <span class="string">'Hello Tadm'</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	render() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">border:</span> '<span class="attr">dashed</span> <span class="attr">1px</span>'&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="xml">			&#123;/* 直接使用 props 和单独 JSX 文件有所区别,但是 props 都是只读的 */&#125;</span></span><br><span class="line"><span class="xml">			This is mycomponent --- &#123;this.props.name&#125; --- &#123;this.props.age&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">			&#123;/* this.state.* '*' is able to read and write */&#125;</span></span><br><span class="line"><span class="xml">			&#123;/* <span class="tag">&lt;<span class="name">h4</span> <span class="attr">style</span>=<span class="string">&#123;styles.hStyle&#125;</span>&gt;</span>&#123; this.state.msg &#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span> */&#125;</span></span><br><span class="line"><span class="xml">			<span class="tag">&lt;<span class="name">h4</span> <span class="attr">className</span>=<span class="string">&#123;[cssStyle.hStyle,</span>'<span class="attr">gSty</span>']<span class="attr">.join</span>(' ')&#125;&gt;</span>&#123; this.state.msg &#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">"btn btn-info"</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> () =&gt;</span> this.doSth() &#125;&gt;button<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">			<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">			&#123;/* <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">className</span>=<span class="string">&#123;cssStyle.input&#125;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.msg&#125;</span> <span class="attr">readOnly</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span> */&#125;</span></span><br><span class="line">			&lt;input type="text" className=&#123;cssStyle.input&#125; value=&#123;this.state.msg&#125; ref="changeM"</span><br><span class="line"><span class="xml">			onChange=&#123; () =&gt; this.changeMsg() &#125;&gt;<span class="tag">&lt;/<span class="name">input</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// doSth() &#123;</span></span><br><span class="line">	<span class="comment">// 	console.log('hello react~');</span></span><br><span class="line">	<span class="comment">// &#125;</span></span><br><span class="line">	doSth = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">//	不会覆盖其他变量并且 setState 是异步操作，需要最新数据则需要在其回调函数中使用</span></span><br><span class="line">		<span class="keyword">this</span>.setState(&#123;</span><br><span class="line">			msg: <span class="string">'hello Sate~'</span></span><br><span class="line">		&#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="comment">//	此时则是最新数据</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="keyword">this</span>.state.msg);</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">	changeMsg = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// console.log(e.target.value);</span></span><br><span class="line">		<span class="keyword">let</span> newValue = <span class="keyword">this</span>.refs.changeM.value</span><br><span class="line">        <span class="comment">//	拿到改变后的值更新到 State</span></span><br><span class="line">		<span class="keyword">this</span>.setState(&#123;</span><br><span class="line">			msg: newValue</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDom.render(<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">p</span> <span class="attr">title</span>=<span class="string">"str"</span>&gt;</span>This is a p tag~<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;str&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">	&#123;/* &#123;frames&#125; */&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">	&#123;/* <span class="tag">&lt;<span class="name">Hello</span> <span class="attr">name</span>=<span class="string">&#123;obj.name&#125;</span> <span class="attr">age</span>=<span class="string">&#123;obj.age&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">Hello</span> &#123;<span class="attr">...obj</span>&#125;&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span> */&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">	&#123;/* <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is newObj &#123;newObj&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span> 不能直接输出对象 */&#125;</span></span><br><span class="line"><span class="xml">	&#123;/* <span class="tag">&lt;<span class="name">Hello</span> &#123;<span class="attr">...newObj</span>&#125;&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">Hellot</span> &#123;<span class="attr">...obj</span>&#125;&gt;</span><span class="tag">&lt;/<span class="name">Hellot</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">Helloignore</span> &#123;<span class="attr">...obj</span>&#125;&gt;</span><span class="tag">&lt;/<span class="name">Helloignore</span>&gt;</span> */&#125;</span></span><br><span class="line"><span class="xml">	&#123;frames.map(item =&gt; <span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">"item"</span> <span class="attr">className</span>=<span class="string">"frames"</span>&gt;</span><span class="tag">&lt;<span class="name">h4</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>)&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">Mycomponent</span> &#123;<span class="attr">...obj</span>&#125;&gt;</span><span class="tag">&lt;/<span class="name">Mycomponent</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">'app'</span>))</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;      <span class="comment">// 创建组件、虚拟DOM，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">'react-dom'</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">//  无状态组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Hello</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">	<span class="comment">// return null</span></span><br><span class="line">	<span class="comment">// props.name = 'change'  //	props's value mustn't change(only read these values)</span></span><br><span class="line">	<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>This is Hello component --- &#123;props.id&#125; --- &#123;props.name&#125; --- &#123;props.age&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当然以上算是一个小小入门，接下来继续~</p><h2 id="Assist-Tool"><a href="#Assist-Tool" class="headerlink" title="Assist Tool"></a>Assist Tool</h2><p>在 <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en" target="_blank" rel="noopener">Chrome</a> 或者 <a href="https://addons.mozilla.org/en-US/firefox/addon/react-devtools/" target="_blank" rel="noopener">Firefox</a> 中安装扩展 React Devtools 可以让你在浏览器开发者工具中查看 React 的组件树。</p><p>安装 React DevTools 之后，按下F12进入开发者界面，此时工具栏最后会多展示一个 React 的选项卡（包含 “⚛️ Components” 和 “⚛️ Profiler”）。你可以使用 “⚛️ Components” 来检查组件树。</p><p>类似于我们开发 Vue 时用到的 Vue Devtools~</p><h1 id="Component"><a href="#Component" class="headerlink" title="Component"></a>Component</h1><p><strong>官方</strong>：<a href="https://zh-hans.reactjs.org/docs/components-and-props.html" target="_blank" rel="noopener">https://zh-hans.reactjs.org/docs/components-and-props.html</a></p><p>组件化思想在现代web开发中用的非常多了已经，比如在 vue 中我们就通常将某个页面，某个功能等抽象为一个单独的组件并通过插槽等手段提高组件的复用性……接下来就简单介绍一下 react 的组件操作</p><h2 id="Create-Two-ways"><a href="#Create-Two-ways" class="headerlink" title="Create(Two ways)"></a>Create(Two ways)</h2><h3 id="Function-方式"><a href="#Function-方式" class="headerlink" title="Function 方式"></a>Function 方式</h3><blockquote><p>此方式建的组件为<strong>无状态组件</strong>（无 state 和 生命周期函数）</p></blockquote><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hello</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">	<span class="comment">// return null </span></span><br><span class="line">	<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello 组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">	id: <span class="number">0</span>,</span><br><span class="line">	name: <span class="string">'Tadm'</span>,</span><br><span class="line">	age: <span class="number">19</span>,</span><br><span class="line">	code: <span class="string">'react'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用组件并 为组件传递 props 数据</span></span><br><span class="line">&lt;Hello &#123;...obj&#125;&gt;&lt;<span class="regexp">/Hello&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 在构造函数中，使用 props 形参，接收外界 传递过来的数据</span></span><br><span class="line"><span class="regexp">function Hello(props) &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ props.name = 'zs'</span></span><br><span class="line"><span class="regexp">  console.log(props)</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ 结论：不论是 Vue 还是 React，组件中的 props 永远都是只读的；不能被重新赋值；</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  return &lt;div&gt;这是 Hello 组件 --- &#123;props.name&#125; --- &#123;props.age&#125; --- &#123;props.gender&#125;&lt;/</span>div&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Class-方式"><a href="#Class-方式" class="headerlink" title="Class 方式"></a>Class 方式</h3><blockquote><p>此方式创建的组件为<strong>有状态组件</strong>（包含独立的 <strong>state</strong> 和 生命周期函数）</p></blockquote><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 需要继承自 React.Component</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> 组件名称 <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="comment">//	也可以传入参数 props</span></span><br><span class="line">		<span class="keyword">super</span>()</span><br><span class="line">		<span class="comment">// before use this must use super()</span></span><br><span class="line">		<span class="keyword">this</span>.state = &#123;</span><br><span class="line">			msg: <span class="string">'Hello Tadm'</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">// 在 组件内部，必须有 render 函数,作用：渲染当前组件对应的 虚拟DOM结构</span></span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="comment">// render 函数中，必须 返回合法的 JSX 虚拟DOM结构</span></span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>这是 class 创建的组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="适用性（摘抄）"><a href="#适用性（摘抄）" class="headerlink" title="适用性（摘抄）"></a>适用性（摘抄）</h2><ul><li>如果一个组件<strong>需要有自己的私有数据</strong>，则推荐使用：class创建的<strong>有状态组件</strong>；</li><li>如果一个组件<strong>不需要有私有的数据</strong>，则推荐使用：<strong>无状态组件</strong>；</li><li>React官方说：<strong>无状态组件</strong>，由于没有自己的state和生命周期函数，所以<strong>运行效率</strong>会比 有状态组件<strong>稍微高一些</strong>；</li></ul><p>组件中的 <code>props</code> 和 <code>state/data</code> 之间的区别</p><ul><li>props 中的数据都是<strong>外界传递</strong>过来的；</li><li>state/data 中的数据，都是<strong>组件私有</strong>的；（通过 Ajax 获取回来的数据，一般都是私有数据）；</li><li>props 中的数据都是<strong>只读的</strong>；不能重新赋值；</li><li>state/data 中的数据，都是<strong>可读可写</strong>的；</li></ul><h2 id="State"><a href="#State" class="headerlink" title="State"></a>State</h2><blockquote><p>在 <strong>React</strong> 中，<strong>state 中的数据相当于是单向流动的</strong>，<strong>只能从组件到页面</strong>，和响应式的 Vue 有所差距，那么我们如果要修改自然也有法子，不然 React 怎么还会成为一个优秀的框架呢？</p></blockquote><p>一般是我们主动去察觉到变化（即知道对应位置数据需要更新），添加一些方法去更新state中的数据：</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">render()&#123;</span><br><span class="line">    &lt;input type=<span class="string">"text"</span> className=&#123;cssStyle.input&#125; value=&#123;<span class="keyword">this</span>.state.msg&#125; ref=<span class="string">"changeM"</span> onChange=&#123; () =&gt; <span class="keyword">this</span>.changeMsg() &#125;&gt;&lt;<span class="regexp">/input&gt;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">changeMsg = () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ console.log(e.target.value);</span></span><br><span class="line"><span class="regexp">    let newValue = this.refs.changeM.value</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/	拿到改变后的值更新到 State</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/  更新是通过 this.setState 来进行，和 vue 中直接赋值有所差距(this.state.* = *)</span></span><br><span class="line"><span class="regexp">    this.setState(&#123;</span></span><br><span class="line"><span class="regexp">        msg: newValue</span></span><br><span class="line"><span class="regexp">    &#125;)</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>这样当我们更改 input 中的内容时则可以更新组件 state 中的数据并返回到页面上实现数据更新</p><p>细节：官方也推荐我们使用<strong>箭头函数</strong>来定义或者调用相应事件</p><h2 id="Code-amp-Example"><a href="#Code-amp-Example" class="headerlink" title="Code &amp; Example"></a>Code &amp; Example</h2><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;<span class="attr">date</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Hello, world!&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;h2&gt;It is &#123;this.state.date.toLocaleTimeString()&#125;.&lt;/</span>h2&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDOM.render(</span></span><br><span class="line"><span class="regexp">  &lt;Clock /</span>&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h1 id="Life"><a href="#Life" class="headerlink" title="Life"></a>Life</h1><p><strong>官方</strong>：<a href="https://zh-hans.reactjs.org/docs/state-and-lifecycle.html" target="_blank" rel="noopener">https://zh-hans.reactjs.org/docs/state-and-lifecycle.html</a></p><h2 id="Examplanation"><a href="#Examplanation" class="headerlink" title="Examplanation"></a>Examplanation</h2><p>React组件生命周期分为<strong>三部分</strong>：</p><ul><li><strong>组件创建阶段</strong>：一辈子只执行一次</li></ul><blockquote><p>componentWillMount:</p><ul><li>在组件创建，并初始化了状态之后，渲染前调用，可以在这里做一些业务初始化操作</li></ul><p>render：</p><ul><li>渲染数据</li></ul><p>componentDidMount:</p><ul><li>在第一次渲染后调用，只在客户端。之后组件已经生成了对应的DOM结构，可以通过this.getDOMNode()来进行访问。 如果你想和其他JavaScript框架一起使用，可以在这个方法中调用setTimeout, setInterval或者发送AJAX请求等操作(防止异步操作阻塞UI)。</li></ul></blockquote><ul><li><strong>组件运行阶段</strong>：按需，根据 props 属性 或 state 状态的改变，有选择性的 执行 0 到多次</li></ul><blockquote><p>componentWillReceiveProps:</p><ul><li>在组件接收到一个新的 prop (更新后)时被调用，在初始化render时不会被调用。</li></ul><p>shouldComponentUpdate:</p><ul><li>返回一个布尔值。在组件接收到新的props或者state时被调用。在初始化时或者使用forceUpdate时不被调用</li><li>可以在你确认不需要更新组件时使用</li></ul><p>componentWillUpdate:</p><ul><li>在组件接收到新的props或者state但还没有render时被调用。在初始化时不会被调用</li></ul><p>render:</p><ul><li>渲染数据</li></ul><p>componentDidUpdate:</p><ul><li>在组件完成更新后立即调用。在初始化时不会被调用</li></ul></blockquote><ul><li><strong>组件销毁阶段</strong>：一辈子只执行一次</li></ul><blockquote><p>componentWillUnmount:</p><ul><li>在组件从 DOM 中移除之前立刻被调用</li></ul></blockquote><p>可以类比 Vue 的生命周期来进行理解（created/mounted/updated/destroyed）</p><p>参考下图：</p><p><img src="https://i.loli.net/2020/02/20/Zz8L6Q9UxrFYhbI.png" alt="LifeCycle.png"></p><h3 id="defaultProps"><a href="#defaultProps" class="headerlink" title="defaultProps"></a>defaultProps</h3><blockquote><p>在组件创建之前，会先初始化默认的props属性，这是全局调用一次，严格地来说，这不是组件的生命周期的一部分。在组件被创建并加载候，首先调用 constructor 构造器中的 this.state = {}，来初始化组件的状态。</p></blockquote><p><img src="https://i.loli.net/2020/02/20/zIVLpUHt4yYP3cl.png" alt="LifeCycleTable.png"></p><h2 id="CODE-amp-Example"><a href="#CODE-amp-Example" class="headerlink" title="CODE &amp; Example"></a>CODE &amp; Example</h2><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//	定义组件</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;<span class="attr">date</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//	组件渲染后调用该方法，定义一个定时器：定时执行 tick</span></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.timerID = setInterval(</span><br><span class="line">      () =&gt; <span class="keyword">this</span>.tick(),</span><br><span class="line">      <span class="number">1000</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  组件在被移除时调用，清除定时器</span></span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    clearInterval(<span class="keyword">this</span>.timerID);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//	 更新组件的状态 state</span></span><br><span class="line">  tick() &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      date: <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//	组件内容</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Hello, world!&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;h2&gt;It is &#123;this.state.date.toLocaleTimeString()&#125;.&lt;/</span>h2&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/	渲染组件到 root</span></span><br><span class="line"><span class="regexp">ReactDOM.render(</span></span><br><span class="line"><span class="regexp">  &lt;Clock /</span>&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>详细过程分析：</strong></p><ol><li>当 <code>&lt;Clock /&gt;</code> 被传给 <code>ReactDOM.render()</code>的时候，React 调用 <code>Clock</code> 组件的构造函数。因为 <code>Clock</code> 需要显示当前的时间，所以它会用一个包含当前时间的对象来初始化 <code>this.state</code>。我们会在之后更新 state。</li></ol><ol start="2"><li>之后 React 会调用组件的 <code>render()</code> 方法。这就是 React 确定该在页面上展示什么的方式。然后 React 更新 DOM 来匹配 <code>Clock</code> 渲染的输出。</li></ol><ol start="3"><li>当 <code>Clock</code> 的输出被插入到 DOM 中后，React 就会调用 <code>ComponentDidMount()</code> 生命周期方法。在这个方法中，<code>Clock</code> 组件向浏览器请求设置一个计时器来每秒调用一次组件的 <code>tick()</code> 方法。</li></ol><ol start="4"><li>浏览器每秒都会调用一次 <code>tick()</code> 方法。 在这方法之中，<code>Clock</code> 组件会通过调用 <code>setState()</code> 来计划进行一次 UI 更新。得益于 <code>setState()</code> 的调用，React 能够知道 state 已经改变了，然后会重新调用 <code>render()</code> 方法来确定页面上该显示什么。这一次，<code>render()</code> 方法中的 <code>this.state.date</code> 就不一样了，如此以来就会渲染输出更新过的时间。React 也会相应的更新 DOM。</li></ol><ol start="5"><li>一旦 <code>Clock</code> 组件从 DOM 中被移除，React 就会调用 <code>componentWillUnmount()</code> 生命周期方法，这样计时器就停止了。</li></ol><p><strong>注意</strong>：</p><p>因为组件state的更新是异步操作，这样我们的某些操作就会被影响，那么如何解决呢：</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Wrong</span></span><br><span class="line"><span class="keyword">this</span>.setState(&#123;</span><br><span class="line">  counter: <span class="keyword">this</span>.state.counter + <span class="keyword">this</span>.props.increment,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//	我们可以传入一个函数而非对象</span></span><br><span class="line"><span class="comment">// Correct</span></span><br><span class="line"><span class="keyword">this</span>.setState(<span class="function">(<span class="params">state, props</span>) =&gt;</span> (&#123;</span><br><span class="line">  counter: state.counter + props.increment</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><blockquote><p>到这里其实我们已经能够体会到 <strong>React</strong> 的整个简单过程，不得不说确实很优秀~</p></blockquote><h1 id="事件处理"><a href="#事件处理" class="headerlink" title="事件处理"></a>事件处理</h1><p><strong>官方(较全)：</strong><a href="https://zh-hans.reactjs.org/docs/handling-events.html" target="_blank" rel="noopener">https://zh-hans.reactjs.org/docs/handling-events.html</a></p></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author:</span> <span class="post-copyright-info"><a href="mailto:undefined">𝓣𝓪𝓭𝓶</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link:</span> <span class="post-copyright-info"><a href="https://liuhongwei3.github.io/2020/02/20/ReactStudyNotesAll/">https://liuhongwei3.github.io/2020/02/20/ReactStudyNotesAll/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice:</span> <span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/React/">React</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/02/21/NodeStudy/"><i class="fa fa-chevron-left"></i> <span>NodeStudy</span></a></div><div class="next-post pull-right"><a href="/2020/02/01/TadmPlayer/"><span>TadmPlayer</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image:url(https://i.loli.net/2020/02/28/2OPSFfaL73QIizV.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2020 &nbsp;<i class="fa fa-heart" aria-hidden="true" id="myheart"></i>&nbsp; <a href="https://liuhongwei3.github.io/" target="_blank">𝓣𝓪𝓭𝓶</a></div><div class="framework-info"><span>Driven -</span> <a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme -</span> <a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="footer_custom_text">Hi,Welcome to my blog,maybe you can find more!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-eye"></i>本篇已阅读次数：<span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script src="/js/heart.js?version=1.7.0"></script><script src="/js/typed.js?version=1.7.0"></script><script src="/js/google.js?version=1.7.0"></script><script>/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)&&($("#nav").addClass("is-mobile"),$("footer").addClass("is-mobile"),$("#top-container").addClass("is-mobile"))</script></body></html>